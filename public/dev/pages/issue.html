<div ng-controller = "issue-controller as issue">
    <div class="row">
      <div class=col-sm-12>
          <h2>{{ issue.title }}</h2>
          <p></p>
          <br>
      </div>
    </div>

    <!-- Added an array to the issue-controller for dynamically pulling from database-->
    <div class="issue row" ng-repeat="row in issue.issuerows">
        <div class="issue">
            <button ng-click="row.voting = !row.voting" type="button" class="btn btn-primary btn-block">{{row.name}}</button>
        </div>
        <h5>{{row.description}}</h5>
        <div ng-controller = "rank-controller as rank" ng-show="row.voting">
            <div ui-sortable="rank.sortableOptions" ng-repeat="list in rank.srcData" ng-model="list" class="sort" 
                 style="border: 1px solid black; float:left;">
                    <div id="item-list-src" ng-repeat="item in list">{{item}}</div>
            </div>
            <div style="float:left;">
                <div ng-repeat="list in rank.tgtData"> 
                        {{rank.title($index)}}
                        <div ui-sortable="rank.sortableOptions" ng-model="list" class="sort" 
                             style="border: 1px solid black; min-height: 40px;">
                            <div id="item-list-tgt" ng-repeat="item in list">{{item}}</div>
                        </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="issue row add">
        <a href="" ng-click="issue.showform= !issue.showform"> Don't see an issue for you? </a>
        <p></p>
        <div class="formwrapper" ng-init = "issue.showform = false" ng-show="issue.showform">
            <div class="form-group">
                <label style="font-size: 12px">Title</label>
                <input type="text" ng-model="issue.new_title" class="form-control">
            </div>
            <div class="form-group">
                <label style="font-size: 12px">Description</label>
                <input type="text" ng-model="issue.new_description" class="form-control">
            </div>
            <button ng-click="issue.submitIssue()" type='button' class='btn btn-success'>Add New Issue</button>        </div>
    </div>
    
</div>